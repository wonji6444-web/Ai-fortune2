<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ”® í¬ì¶˜ì¿ í‚¤ AI ê°€ì±  ìš´ì„¸ (B+ì•ˆ MVP)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #fcf8e3; color: #4b380a; }
        .header-bg { background-color: #ffc400; padding: 20px 0; }
        .input-card, .result-card { border-radius: 12px; box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1); }
        .interest-btn { transition: all 0.2s; border: 2px solid #ffc400; padding: 8px 12px; border-radius: 9999px; font-size: 0.9rem; margin: 4px; }
        .interest-btn.selected { background-color: #ffc400; color: #4b380a; border-color: #e0a800; font-weight: 700; }
        .gacha-btn { background-color: #9c27b0; transition: background-color 0.2s; }
        .gacha-btn:hover { background-color: #7b1fa2; }
        
        /* ë¡œë”© ì˜¤ë²„ë ˆì´ ìŠ¤íƒ€ì¼ */
        #loadingOverlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.9); z-index: 100; display: none; }
        .loader-content { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; }
        .loader-gif { width: 150px; height: 150px; background-color: #ffc400; border-radius: 50%; margin: 0 auto 20px; animation: pulse 1.5s infinite; }
        @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(255, 196, 0, 0.7); } 70% { box-shadow: 0 0 0 15px rgba(255, 196, 0, 0); } 100% { box-shadow: 0 0 0 0 rgba(255, 196, 0, 0); } }
    </style>
</head>
<body>

    <!-- ê°€ì±  ë¡œë”© ì˜¤ë²„ë ˆì´ -->
    <div id="loadingOverlay">
        <div class="loader-content">
            <div class="loader-gif"></div> 
            <h2 class="text-white text-3xl font-bold mb-4">ğŸ”® ì˜¤ëŠ˜ì˜ ìš´ì„¸ ë½‘ëŠ” ì¤‘...</h2>
            <p id="loadingMessage" class="text-yellow-300 text-lg"></p>
        </div>
    </div>
    
    <div class="header-bg shadow-xl">
        <div class="max-w-3xl mx-auto p-4 text-center">
            <h1 class="text-3xl font-extrabold text-[#4b380a]">ğŸ° í¬ì¶˜ì¿ í‚¤ AI ê°€ì± </h1>
            <p class="text-sm">ì‚¬ì£¼/ì¼ì •ì„ ë°”íƒ•ìœ¼ë¡œ ì˜¤ëŠ˜ì˜ ìš´ì„¸ë¥¼ ë°”ë¡œ í™•ì¸í•˜ì„¸ìš”!</p>
        </div>
    </div>

    <div class="max-w-3xl mx-auto p-4">
        
        <!-- === HOME í™”ë©´ === -->
        <div id="homeScreen" class="hidden space-y-4">
            
            <div class="flex justify-between items-center bg-white p-4 input-card">
                <p id="homeHeader" class="text-xl font-bold">ğŸ‘‹ OOOë‹˜, ì˜¤ëŠ˜ì˜ ìš´ì„¸ì…ë‹ˆë‹¤.</p>
                <button onclick="showOnboarding(true)" class="py-2 px-4 bg-gray-200 text-gray-700 font-bold rounded-lg hover:bg-gray-300 transition text-sm">
                    ğŸ“ ì •ë³´ ìˆ˜ì •
                </button>
            </div>

            <!-- HOME í™”ë©´ì˜ ì»¨íŠ¸ë¡¤ ë²„íŠ¼ -->
            <div class="flex justify-center space-x-4 mb-6">
                 <button onclick="checkAndDisplayFortune()" class="py-3 px-6 bg-[#ffc400] text-[#4b380a] font-bold rounded-lg hover:bg-yellow-600 transition text-lg shadow-md">
                    ğŸ”„ ì˜¤ëŠ˜ì˜ ìš´ì„¸ ë°”ë¡œ í™•ì¸
                </button>
                <a href="#" onclick="alert('TODO: ë§ˆì´í˜ì´ì§€ - ìš´ì„¸ ëª¨ìŒì§‘ (DB í•„ìš”)')" class="py-3 px-6 bg-gray-400 text-white font-bold rounded-lg hover:bg-gray-500 transition text-lg shadow-md">
                    ğŸ“š ë‚´ ìš´ì„¸ ì €ì¥ì†Œ
                </a>
            </div>
            
            <!-- HOME í™”ë©´ì˜ ìš´ì„¸ í‘œì‹œ ì˜ì—­ -->
            <div id="homeResult" class="min-h-[300px] flex items-center justify-center bg-white rounded-xl shadow-lg p-6">
                <p class="text-gray-500">ìš´ì„¸ í™•ì¸ ë²„íŠ¼ì„ ëˆŒëŸ¬ ì˜¤ëŠ˜ì˜ í¬ì¶˜ì¿ í‚¤ë¥¼ ë½‘ì•„ë³´ì„¸ìš”!</p>
            </div>
            
            <!-- ê´€ì‹¬ì‚¬ íƒ­ ë²„íŠ¼ ì˜ì—­ -->
            <div id="tabsContainer" class="mt-6 flex justify-center space-x-2">
                <!-- íƒ­ ë²„íŠ¼ì´ ë™ì ìœ¼ë¡œ ìƒì„±ë  ì˜ì—­ -->
            </div>

            <!-- ìƒì„¸ í’€ì´ ì˜ì—­ -->
            <div id="tabContent" class="mt-6 bg-white input-card p-4">
                <p class="text-gray-500">ìƒì„¸ í’€ì´ë¥¼ ë³´ë ¤ë©´ ëª©í‘œ íƒ­ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.</p>
            </div>
            
        </div>
        
        <!-- === ì˜¨ë³´ë”© í™”ë©´ (ìˆ¨ê²¨ì§) === -->
        <div id="onboardingScreen">
            <h2 class="text-2xl font-bold mb-6 text-gray-800">1. ë‚˜ì˜ ì •ë³´ ì…ë ¥</h2>
            
            <div class="bg-white input-card p-6 space-y-4">
                
                <!-- ì‚¬ì£¼ ì •ë³´ -->
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label for="birthDate" class="block text-sm font-medium text-gray-700">ìƒë…„ì›”ì¼ (ì–‘ë ¥)</label>
                        <input type="date" id="birthDate" class="mt-1 block w-full border border-gray-300 rounded-lg p-2">
                    </div>
                    <div>
                        <label for="birthTime" class="block text-sm font-medium text-gray-700">íƒœì–´ë‚œ ì‹œê°</label>
                        <input type="time" id="birthTime" class="mt-1 block w-full border border-gray-300 rounded-lg p-2">
                    </div>
                    <div>
                        <label for="genderSelect" class="block text-sm font-medium text-gray-700">ì„±ë³„</label>
                        <select id="genderSelect" class="mt-1 block w-full border border-gray-300 rounded-lg p-2">
                            <option value="ë‚¨ì„±">ë‚¨ì„±</option>
                            <option value="ì—¬ì„±">ì—¬ì„±</option>
                        </select>
                    </div>
                    <div>
                        <label for="loveStatus" class="block text-sm font-medium text-gray-700">ì—°ì•  ìƒíƒœ</label>
                        <select id="loveStatus" class="mt-1 block w-full border border-gray-300 rounded-lg p-2">
                            <option value="ì‹±ê¸€(ì†”ë¡œ)">ì‹±ê¸€(ì†”ë¡œ)</option>
                            <option value="ì—°ì•  ì¤‘">ì—°ì•  ì¤‘</option>
                            <option value="ê¸°í˜¼">ê¸°í˜¼</option>
                        </select>
                    </div>
                </div>

                <!-- ê°œì¸ ë§¥ë½ -->
                <h3 class="text-lg font-bold pt-4 border-t text-gray-800">í˜„ì¬ ìƒí™© ë° ë§íˆ¬ ì„ íƒ</h3>
                <label for="jobInput" class="block text-sm font-medium text-gray-700">ì§ì—…/ìƒíƒœ (ìì„¸íˆ)</label>
                <input type="text" id="jobInput" placeholder="ì˜ˆ: ì·¨ì¤€ìƒ, ì´ì§ ì¤€ë¹„ Në…„ì°¨, í”„ë¦¬ëœì„œ" class="mt-1 block w-full border border-gray-300 rounded-lg p-2">
                
                <label for="toneSelect" class="block text-sm font-medium text-gray-700">ì„ í˜¸í•˜ëŠ” ë§íˆ¬</label>
                <select id="toneSelect" class="mt-1 block w-full border border-gray-300 rounded-lg p-2">
                    <option value="ë‹¤ì •í•œ ì¹œêµ¬ì˜ ë§íˆ¬ (ë°˜ë§, ê³µê°)">â‘  ë‹¤ì •í•œ ì¹œêµ¬ (ë°˜ë§)</option>
                    <option value="ë”°ëœ»í•œ ì¡°ì–¸ê°€ì˜ ë§íˆ¬ (ì¡´ëŒ“ë§, ì¿ ì…˜ì–´)">â‘¡ ë”°ëœ»í•œ ì¡°ì–¸ê°€ (ì¡´ëŒ“ë§)</option>
                    <option value="ë…¼ë¦¬ì ì¸ ë¶„ì„ê°€ì˜ ë§íˆ¬ (íŒ©íŠ¸, ëƒ‰ì² í•¨)">â‘¢ ë…¼ë¦¬ì ì¸ ë¶„ì„ê°€ (íŒ©íŠ¸)</option>
                </select>
                
                <!-- ê´€ì‹¬ì‚¬ 3ê°œ ì„ íƒ -->
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2">ì´ë²ˆ ë‹¬ì˜ í•µì‹¬ ëª©í‘œ (3ê°œ ì„ íƒ)</label>
                    <div id="interestOptions" class="flex flex-wrap gap-2">
                        <button type="button" class="interest-btn" data-interest="ğŸ’¼ ì»¤ë¦¬ì–´/ê³µë¶€">ğŸ’¼ ì»¤ë¦¬ì–´/ê³µë¶€</button>
                        <button type="button" class="interest-btn" data-interest="ğŸ’° ê¸ˆì „/ì¬ì •">ğŸ’° ê¸ˆì „/ì¬ì •</button>
                        <button type="button" class="interest-btn" data-interest="â¤ï¸ ì—°ì• /ê´€ê³„">â¤ï¸ ì—°ì• /ê´€ê³„</button>
                        <button type="button" class="interest-btn" data-interest="ğŸ§˜ ê±´ê°•/ì—ë„ˆì§€">ğŸ§˜ ê±´ê°•/ì—ë„ˆì§€</button>
                        <button type="button" class="interest-btn" data-interest="ğŸŒ± ìê¸°ê³„ë°œ">ğŸŒ± ìê¸°ê³„ë°œ</button>
                    </div>
                    <p id="interestCount" class="text-xs text-gray-500 mt-1">0/3ê°œ ì„ íƒë¨</p>
                </div>
                
                <button type="button" onclick="saveAndGenerate()" class="w-full py-4 gacha-btn text-white font-bold text-xl rounded-lg shadow-2xl">
                    ğŸ’¾ ì •ë³´ ì €ì¥ í›„ ìš´ì„¸ ë½‘ê¸°!
                </button>

                <!-- êµ¬ê¸€ ìº˜ë¦°ë” ì—°ë™ ì˜ì—­ -->
                <div class="mt-6 text-center">
                    <p id="calendarStatus" class="text-sm font-bold text-red-600 mb-2">âš ï¸ ìº˜ë¦°ë” ë¯¸ì—°ë™</p>
                    <button type="button" id="connectCalendarBtn" 
                            onclick="connectGoogleCalendar()" 
                            class="bg-white hover:bg-gray-100 text-gray-800 font-semibold py-2 px-4 border border-gray-400 rounded shadow inline-flex items-center">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/a/a5/Google_Calendar_icon_%282020%29.svg" 
                             alt="Google Calendar" 
                             class="w-5 h-5 mr-2">
                        êµ¬ê¸€ ìº˜ë¦°ë” ì—°ë™í•˜ê¸°
                    </button>
                </div>
                
                <!-- ìº˜ë¦°ë” ì—°ë™ í›„ ìƒíƒœ í‘œì‹œ ì˜ì—­ -->
                <div id="calendarConnectedStatus" class="mt-4 text-center hidden">
                    <p class="text-sm font-bold text-green-600">âœ… ìº˜ë¦°ë” ì—°ë™ë¨</p>
                    <button type="button" 
                            onclick="disconnectGoogleCalendar()" 
                            class="text-sm text-gray-600 hover:text-red-600 mt-1">
                        ì—°ë™ í•´ì œ
                    </button>
                </div>

            </div>
        </div>
        
    </div>

    <script src="script.js"></script>
</body>
</html>